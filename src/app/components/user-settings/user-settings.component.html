<!-- src/app/components/user-settings/user-settings.component.html -->
<div class="user-settings">
    <div class="section-header">
      <h2>Account Settings</h2>
    </div>
  
    <!-- Notification Settings -->
    <form [formGroup]="settingsForm" (ngSubmit)="onSettingsSubmit()" class="settings-form">
      <section class="settings-section">
        <h3>Email Notifications</h3>
        <div formGroupName="emailNotifications" class="settings-group">
          <label class="setting-item">
            <span>Order Updates</span>
            <input type="checkbox" formControlName="orderUpdates">
          </label>
          <label class="setting-item">
            <span>Promotions and Deals</span>
            <input type="checkbox" formControlName="promotions">
          </label>
          <label class="setting-item">
            <span>Newsletter</span>
            <input type="checkbox" formControlName="newsletter">
          </label>
          <label class="setting-item">
            <span>Product Updates</span>
            <input type="checkbox" formControlName="productUpdates">
          </label>
        </div>
      </section>
  
      <section class="settings-section">
        <h3>Push Notifications</h3>
        <div formGroupName="pushNotifications" class="settings-group">
          <label class="setting-item">
            <span>Order Updates</span>
            <input type="checkbox" formControlName="orderUpdates">
          </label>
          <label class="setting-item">
            <span>Promotions</span>
            <input type="checkbox" formControlName="promotions">
          </label>
          <label class="setting-item">
            <span>Recommendations</span>
            <input type="checkbox" formControlName="recommendations">
          </label>
        </div>
      </section>
  
      <section class="settings-section">
        <h3>Privacy Settings</h3>
        <div formGroupName="privacySettings" class="settings-group">
          <div class="setting-item">
            <span>Profile Visibility</span>
            <select formControlName="profileVisibility">
              <option value="public">Public</option>
              <option value="private">Private</option>
              <option value="friends">Friends Only</option>
            </select>
          </div>
          <label class="setting-item">
            <span>Activity Tracking</span>
            <input type="checkbox" formControlName="activityTracking">
          </label>
          <label class="setting-item">
            <span>Data Sharing with Third Parties</span>
            <input type="checkbox" formControlName="dataSharingThirdParty">
          </label>
        </div>
      </section>
  
      <div class="form-actions">
        <button type="submit" [disabled]="!settingsForm.valid || loading">
          Save Settings
        </button>
      </div>
    </form>
  
    <!-- Change Password -->
    <form [formGroup]="passwordForm" (ngSubmit)="onPasswordSubmit()" class="password-form">
      <section class="settings-section">
        <h3>Change Password</h3>
        <div class="form-group">
          <label for="currentPassword">Current Password</label>
          <input 
            type="password" 
            id="currentPassword" 
            formControlName="currentPassword"
            [class.error]="passwordForm.get('currentPassword')?.invalid && 
                          passwordForm.get('currentPassword')?.touched">
        </div>
  
        <div class="form-group">
          <label for="newPassword">New Password</label>
          <input 
            type="password" 
            id="newPassword" 
            formControlName="newPassword"
            [class.error]="passwordForm.get('newPassword')?.invalid && 
                          passwordForm.get('newPassword')?.touched">
          <div class="password-requirements" *ngIf="passwordForm.get('newPassword')?.touched">
            <p>Password must contain:</p>
            <ul>
              <li [class.valid]="passwordForm.get('newPassword')?.value?.length >= 8">
                At least 8 characters
              </li>
              <li [class.valid]="passwordForm.get('newPassword')?.value?.match(/[A-Z]/)">
                One uppercase letter
              </li>
              <li [class.valid]="passwordForm.get('newPassword')?.value?.match(/[a-z]/)">
                One lowercase letter
              </li>
              <li [class.valid]="passwordForm.get('newPassword')?.value?.match(/\d/)">
                One number
              </li>
            </ul>
          </div>
        </div>
  
        <div class="form-group">
          <label for="confirmPassword">Confirm New Password</label>
          <input 
            type="password" 
            id="confirmPassword" 
            formControlName="confirmPassword"
            [class.error]="passwordForm.hasError('mismatch') && 
                          passwordForm.get('confirmPassword')?.touched">
          <div class="error-message" *ngIf="passwordForm.hasError('mismatch') && 
                                          passwordForm.get('confirmPassword')?.touched">
            Passwords do not match
          </div>
        </div>
  
        <div class="form-actions">
          <button type="submit" [disabled]="!passwordForm.valid || loading">
            Update Password
          </button>
        </div>
      </section>
    </form>
  </div>