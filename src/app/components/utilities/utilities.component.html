<!-- // utilities.html-->
 
<div class="utilities-container">
  <!-- Support/Service Dropdown -->
  <div class="utility-item" [class.active]="showSupport">
    <button class="utility-button" (click)="toggleSupport($event)">
      <i class="utility-icon fas fa-comments"></i>
      <span class="utility-label">Atendimento</span>
    </button>
    <div class="dropdown-menu" [class.show]="showSupport">
      <a [href]="getWhatsAppLink()" class="dropdown-item" target="_blank" rel="noopener noreferrer">
        <i class="fab fa-whatsapp"></i>
        <span>{{contactInfo.whatsapp.formattedNumber}}</span>
      </a>
      <a [href]="getEmailLink()" class="dropdown-item">
        <i class="fas fa-envelope"></i>
        <span>{{contactInfo.email.address}}</span>
      </a>
    </div>
  </div>

 <!-- Account Dropdown -->
  <div class="utility-item" [class.active]="showAccount">
    <button class="utility-button" (click)="toggleAccount($event)">
      <i class="utility-icon fas fa-user"></i>
      <span class="utility-label">{{ currentUser ? currentUser.fullname : 'Minha conta' }}</span>
    </button>
    <div class="dropdown-menu" [class.show]="showAccount">
      <!-- Show these items when not logged in -->
      <ng-container *ngIf="!currentUser">
        <a routerLink="/account/register" class="dropdown-item">
          <i class="fas fa-user-plus"></i>
          <span>Criar uma conta</span>
        </a>
        <a routerLink="/account/login" class="dropdown-item">
          <i class="fas fa-sign-in-alt"></i>
          <span>Iniciar sess√£o</span>
        </a>
      </ng-container>

      <!-- Show these items when logged in -->
      <ng-container *ngIf="currentUser">
        <a routerLink="/account/profile" class="dropdown-item">
          <i class="fas fa-user-circle"></i>
          <span>Meu Perfil</span>
        </a>
        <a href="javascript:void(0)" class="dropdown-item" (click)="logout()">
          <i class="fas fa-sign-out-alt"></i>
          <span>Sair</span>
        </a>
      </ng-container>
    </div>
  </div>

  <!-- Cart Button -->
  <div class="utility-item">
    <button class="utility-button" (click)="toggleCart($event)">
      <i class="utility-icon fas fa-shopping-cart"></i>
      <span class="utility-label">Meu carrinho</span>
      <span class="cart-badge" *ngIf="cartCount > 0">{{cartCount}}</span>
    </button>
  </div>

  <!-- Cart Sidebar -->
  <app-cart-sidebar></app-cart-sidebar>


</div>